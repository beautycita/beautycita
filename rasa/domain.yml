version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - book_appointment
  - check_availability
  - cancel_booking
  - reschedule_booking
  - ask_services
  - ask_prices
  - ask_location
  - ask_stylists
  - provide_name
  - provide_phone
  - provide_date
  - provide_time
  - provide_service
  - out_of_scope
  - beauty_advice
  - general_conversation

entities:
  - name
  - phone
  - date
  - time
  - service
  - stylist
  - location

slots:
  user_name:
    type: text
    mappings:
    - type: from_entity
      entity: name
  user_phone:
    type: text
    mappings:
    - type: from_entity
      entity: phone
  preferred_date:
    type: text
    mappings:
    - type: from_entity
      entity: date
  preferred_time:
    type: text
    mappings:
    - type: from_entity
      entity: time
  service_type:
    type: text
    mappings:
    - type: from_entity
      entity: service
  preferred_stylist:
    type: text
    mappings:
    - type: from_entity
      entity: stylist
  booking_location:
    type: text
    mappings:
    - type: from_entity
      entity: location
  booking_step:
    type: categorical
    values:
      - service_selection
      - date_selection
      - time_selection
      - stylist_selection
      - confirmation
    mappings:
    - type: custom

forms:
  booking_form:
    required_slots:
      - user_name
      - user_phone
      - service_type
      - preferred_date
      - preferred_time

responses:
  utter_greet:
    - text: "¡Hola! Soy el asistente de BeautyCita. ¿Cómo puedo ayudarte hoy?"
    - text: "¡Bienvenida a BeautyCita! ¿Te gustaría reservar una cita de belleza?"

  utter_goodbye:
    - text: "¡Hasta pronto! Que tengas un día hermoso."
    - text: "¡Gracias por elegir BeautyCita! Te esperamos pronto."

  utter_ask_service_type:
    - text: "¿Qué tipo de servicio te gustaría reservar? Ofrecemos corte, color, peinado, manicura, pedicura y más."
      buttons:
        - title: "Corte de cabello"
          payload: '/provide_service{"service": "corte"}'
        - title: "Color/Tinte"
          payload: '/provide_service{"service": "color"}'
        - title: "Peinado"
          payload: '/provide_service{"service": "peinado"}'
        - title: "Manicura"
          payload: '/provide_service{"service": "manicura"}'
        - title: "Pedicura"
          payload: '/provide_service{"service": "pedicura"}'

  utter_ask_user_name:
    - text: "Para continuar con tu reserva, ¿cuál es tu nombre?"

  utter_ask_user_phone:
    - text: "¿Podrías proporcionarme tu número de teléfono para confirmar la cita?"

  utter_ask_preferred_date:
    - text: "¿Qué día te gustaría agendar tu cita? Puedes decirme una fecha específica o algo como 'mañana' o 'la próxima semana'."

  utter_ask_preferred_time:
    - text: "¿A qué hora prefieres tu cita? Nuestro horario es de 9:00 AM a 7:00 PM."

  utter_services_available:
    - text: "Ofrecemos estos servicios:\n• Corte de cabello - desde $300\n• Color/Tinte - desde $500\n• Peinado - desde $200\n• Manicura - desde $150\n• Pedicura - desde $180\n• Tratamientos faciales - desde $400"

  utter_check_availability:
    - text: "Déjame verificar la disponibilidad para {preferred_date} a las {preferred_time}..."

  utter_booking_confirmed:
    - text: "¡Perfecto! Tu cita para {service_type} ha sido confirmada para el {preferred_date} a las {preferred_time}. Te enviaremos un recordatorio por WhatsApp."

  utter_booking_failed:
    - text: "Lo siento, no hay disponibilidad en esa fecha y hora. ¿Te gustaría elegir otra opción?"

  utter_default:
    - text: "No entiendo bien lo que necesitas. ¿Podrías reformular tu pregunta? Puedo ayudarte a reservar citas de belleza."

  utter_out_of_scope:
    - text: "Soy un asistente especializado en reservas de BeautyCita. ¿Te gustaría agendar una cita de belleza?"

actions:
  - action_check_availability
  - action_book_appointment
  - action_cancel_booking
  - action_get_services
  - action_get_stylists
  - validate_booking_form
  - action_openai_response
  - action_enhanced_greeting

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true